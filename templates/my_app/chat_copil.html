{% extends 'my_app/base_copil.html' %}
{% load static %}

{% block head_block %}
<style>
    .banner2{
        width: 100%;
        height: 100%;
        background-color: #fff;
        margin-top: 60px;
    }
    #form1{
        font-family: 'Montserrat', sans-serif;
        font-weight: bolder;
        padding-top: 40px;
        padding-bottom: 30px;
    }
    .image4{
        width: 100%;
        height: 80%;
        border-radius: 100%;
    }
    .button2{
        padding-left: 20px;
            padding-right: 20px;
            color: #28a6fa;
            border: 2px solid #28a6fa;
            transition: 0.3s ease-in-out;
            border-top-left-radius: 0.25rem;
            border-bottom-left-radius: 0.25rem;
            background-color: #fff;
    }
    .button2:hover{
            background-color: #28a6fa;
            color: #fff;
        }
    .title{
        font-family: 'Montserrat', sans-serif;
        font-weight: bolder;
        font-size: 19px;
    }
    #id_message{
        margin-left: 40px;
    }
    #button3{
        margin-right: 40px;
        padding-left: 20px;
        padding-right: 20px;
        color: #28a6fa;
        border: 2px solid #28a6fa;
        transition: 0.3s ease-in-out;
        border-top-right-radius: 0.25rem;
        border-bottom-right-radius: 0.25rem;
        background-color: #fff;
    }
    #button3:hover{
        background-color: #28a6fa;
        color: #fff;
    }
    #jumbotron2{
        padding-top: 30px;
        padding-bottom: 20px;
    }
    .param3{
        font-family: 'Montserrat', sans-serif;
        font-weight: bolder;
        font-size: 19px;
    }
    #icon2{
        color: #28a6fa;
        font-size: 24px;
        transition: 0.3s ease-in-out;
    }
    #icon2:hover{
        color: #0a83d4;
    }
    @media (max-width: 600px){
        .image4{
            width: 30%;
            height: 90%;
        }
    }
</style>
{% endblock %}

{% block body_block %}
<div class="container">
    <div class="section chat-section">
        <div class="row">
            <div class="col-lg-4 col-md-6 col-sm-6">
                <div class="banner2">
                    <div class="collection" style="height: 68vh; padding: 5px; overflow-y: scroll">
                        <div class="container">
                            <form method="POST" class="form-group" action="{% url 'my_app:cautare_user' %}" id="form1">
                                {% csrf_token %}
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <button type="submit" class="button2">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                    <input type="search" class="form-control" name="name" placeholder="Cauta aici..." autocomplete="off" required>
                                </div>
                            </form>
                            {% for user in users %}
                            <a href="{% url 'my_app:chat' request.user.id user.id %}" id="user{{ user.id }}">
                                <div class="row">
                                    <div class="col-lg-3 col-md-6 col-sm-6">
                                        <img src="{% static 'images/user2.png' %}" class="image4">
                                    </div>
                                    <div class="col-lg-9 col-md-6 col-sm-6">
                                        <span class="title" style="font-weight: bolder">{{ user.username }}</span>
                                    </div>
                                </div>
                            </a>
                            <hr>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8 col-md-6 col-sm-6">
                <div class="banner2">
                    <div id="board" class="section grey lighten-3" style="height: 68vh; padding: 5px; overflow-y: scroll">
                        {% block messages %}

                        {% endblock %}
            </div>
            <form id="chat-box" class="form-group {% block hide %}hide{% endblock %}" method="post" style="font-family: 'Montserrat', sans-serif;font-weight: bolder;">
                {% csrf_token %}
                <div class="row">
                    <div class="col s11">
                        <div class="input-field">
                            <!-- <input id="id_message" name="message" type="text" placeholder="Type your message.." autocomplete="off" required> -->
                            <div class="input-group mb-3">
                                <input id="id_message" name="message" type="text" class="form-control" placeholder="Scrie un mesaj..." autocomplete="off" required>
                                <div class="input-group-append">
                                  <button type="submit" id="button3">
                                    <i class="fas fa-share"></i>
                                  </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="col s1" style="line-height: 80px">
                        <button class="btn btn-floating blue lighten-2 waves-effect waves-light"><i class="material-icons">send</i></button>
                    </div> -->
                </div>
            </form>
            </div>
        </div>
    </div>
    </div>
</div>
<div class="jumbotron" style="background-color: #1F1D36;margin-bottom: 0px;margin-top: 6rem;">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-6">
              <h2 style="font-family: 'Montserrat', sans-serif;font-weight: bolder;color: #fff;">Informatii</h2>
              <br>
              <a href="{% url 'ajutor_si_contact' %}" id="anchor1">Ajutor si contact</a>
              <a href="{% url 'politica_confi' %}" id="anchor1">Politica de confidentialitate</a>
              <a href="{% url 'politica_cookie' %}" id="anchor1">Politica de cookie-uri</a>
              <a href="{% url 'termeni_si_conditii' %}" id="anchor1">Termeni si conditii</a>
              <a href="{% url 'securitate' %}" id="anchor1">Protejeaza-te pe Maglo</a>
              <a href="https://anpc.ro/" id="anchor1">ANPC</a>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
              <h2 style="font-family: 'Montserrat', sans-serif;font-weight: bolder;color: #fff;">Date de contact</h2>
              <br>
              <p id="anchor1">E-mail:</p>
              <p id="anchor1">Date firma:</p>
              <p id="anchor1">CUI:</p>
              <p id="anchor1">Registrul comertului:</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
              <h2 style="font-family: 'Montserrat', sans-serif;font-weight: bolder;color: #fff;">Urmareste-ne</h2>
              <br>
              <a href="" id="anchor1"><i class="fab fa-facebook"></i> Facebook</a>
              <a href="" id="anchor1"><i class="fab fa-instagram"></i> Instagram</a>
              <a href="" id="anchor1"><i class="fab fa-linkedin"></i> Linked-In</a>
            </div>
        </div>
    </div>
</div>
<div class="jumbotron" style="background-color: #2d2b4b;margin-bottom: 0px;padding-top: 30px;padding-bottom: 30px;font-family: 'Montserrat', sans-serif;font-weight: bolder;">
    <div class="container">
        <p style="font-size: 22px;color: #fff;text-align: center;">Â© Copyright {{date_posted}} - Maglo - Toate drepturile rezervate</p>
    </div>
</div>
    {% load static %}
    <script src="{% static 'js/chat.js' %}"></script>
    <script>
        // For receiving
        sender_id = "{{ receiver.id }}";
        receiver_id = "{{ request.user.id }}";

        //For sending
        $(function () {
            scrolltoend();
            $('#chat-box').on('submit', function (event) {
                event.preventDefault();
                var message = $('#id_message');
                send('{{ request.user.username }}', '{{ receiver.username }}', message.val());
                message.val('');
            })
        })
    </script>
{% endblock %}